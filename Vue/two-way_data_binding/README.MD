# 实现Vue双向绑定

## 原理
- Object.defineProperty()
- 观察者模式

## 实现思路
- 需要一个监听器`Observer`，用来监听所有属性。
- 当属性发生变化，通知订阅者`Watcher`看是否需要更新。
- 因为存在多个订阅者`Watcher`，所以需要有一个消息订阅器`Dep`专门收集这些订阅者，然后在监听器`Observer`和订阅者`Watcher`之间进行统一管理。
- 我们还需要有一个指令解析器`Compile`，对每个节点元素进行扫描和解析，将相关指令对应初始化成一个订阅者`Watcher`，并替换模板数据或者绑定相应的函数，此时当订阅者`Watcher`接收到相应属性的变化，就会执行对应的更新函数，从而更新视图。

## 实现步骤
1. 实现一个监听器`Observer`，用来劫持并监听所有属性，如果有变动的，就通知订阅者。
2. 实现一个订阅者`Watcher`，可以收到属性的变化通知并执行相应的函数，从而更新视图。
3. 实现一个解析器`Compile`，可以扫描和解析每个节点的相关指令，并根据初始化模板数据以及初始化相应的订阅器。

## 参考
- [vue的双向绑定原理及实现](http://www.cnblogs.com/canfoo/p/6891868.html)
- [掘金小册——剖析 Vue.js 内部运行机制]()